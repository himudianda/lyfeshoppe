{% import 'macros/form.jinja2' as f with context %}

{% if request.endpoint.endswith('new') %}
  {% set endpoint = 'backend.businesses_new' %}
  {% set form_kwargs = {} %}
  {% set legend = 'Add a new business' %}
  {% set button = _('Add') %}
{% else %}
  {% set endpoint = 'backend.businesses' %}
  {% set form_kwargs = {'id': business.id} %}
  {% set legend = 'Update this business' %}
  {% set button = _('Save') %}
{% endif %}

<div class="row">
    <div class="col-md-4 col-md-offset-4 well">
      {% call f.form_tag(endpoint, **form_kwargs) %}

        {% call f.form_group(form.name, css_class='sm-margin-bottom') %}
        {% endcall %}

        {% call f.form_group(form.email, css_class='sm-margin-bottom') %}
        {% endcall %}

        {% call f.form_group(form.type, css_class='sm-margin-bottom') %}
        {% endcall %}

        <div class="dt relative">
          {% call f.form_group(form.open_time) %}
          {% endcall %}
        </div>

        <div class="dt relative">
          {% call f.form_group(form.close_time) %}
          {% endcall %}
        </div>

        {% call f.form_group(form.phone, css_class='sm-margin-bottom') %}
        {% endcall %}

        {% call f.form_group(form.active, css_class='sm-margin-bottom') %}
        {% endcall %}

          <hr>
          <div class="row">
              <div class="col-md-6">
                  <button type="submit" class="btn btn-primary btn-block">
                      <img src="{{ asset_url_for('images/spinner.gif') }}"
                           class="spinner"
                           width="16" height="11" alt="Spinner"/>
                    {{ button }}
                  </button>
              </div>
              <div class="col-md-6">
                  <div class="visible-xs visible-sm sm-margin-top"></div>
                  <a href="{{ url_for('backend.businesses') }}"
                     class="btn btn-default btn-block">
                    {{ _('Cancel') }}
                  </a>
              </div>
          </div>
      {% endcall %}
    </div>
</div>
